以用户为中心的性能指标

性能谬论：

1. 我已经测试我的应用，加载时间为 X.XX 秒
   1. 这种陈述的问题并不在于不真实，而在于扭曲事实。 加载时间会因为用户不同而有很大的变化，具体取决于用户的设备功能以及网络状况。
      以单个数字的形式呈现加载时间忽略了遭遇过长加载时间的用户。
   2. 加载并非单一的时刻，而是一种任何单一指标都无法全面衡量的体验。
      在加载过程中，有多个时刻都会影响到用户对速度的感知，如果只关注其中某个时刻，就可能会遗漏其余时间内用户感受到的不良体验。
      首屏渲染是非常重要的，但假定某应用针对快速初始渲染进行优化，以便立刻将内容传递给用户。 然后，如果该应用加载一个需要花费数秒来解析和执行的大型 JavaScript 软件包，那么只有在 JavaScript 运行之后，页面上的内容才可供交互。如果用户可以看到页面上的链接但无法点击，或者可以看到文本框但无法在其中输入内容，他们可能就不会关心页面渲染的速度有多快。
      因此，我们不应该只使用一个指标来衡量加载，而应该衡量整个体验过程中可能影响用户对加载的感知的每个时刻。
2. 性能只是加载时间的问题。
   事实是，随时都有可能发生性能不佳的情况，不只限于加载期间。应用无法迅速响应点按或点击操作，以及无法平滑滚动或产生动画效果的问题与加载缓慢一样，都会导致糟糕的用户体验。 用户关心的是总体体验，我们开发者也应如此。
   这个插一句：在用户多次点击提交按钮的时候，后端是否会因为异步的原因越过某些拦截机制而真的进行多次提交呢？这个在业务中经常发生而导致用户数据紊乱。
   如果用户操作得到的服务器响应很慢，至少应该有 loading 让用户明白这不是卡死状态

以用户为中心的性能指标

1. 是否发生？(导航是否成功启动？服务器是否有响应？)
   首次绘制 (FP)/首次内容绘制 (FCP)
   FP 标记浏览器渲染任何在视觉上不同于导航前屏幕内容之内容的时间点。 相比而言，FCP 标记的是浏览器渲染来自 DOM 第一位内容的时间点，该内容可能是文本、图像、SVG 甚至 <canvas> 元素。
2. 是否有用？(是否已渲染可以与用户互动的足够内容？)
   首次有效绘制 (FMP)/主角元素计时
   网页的这些“最重要部分”通常称为主角元素。 例如，在 YouTube 观看页面上，主视频就是主角元素。 在 Twitter 上，主角元素可能是通知标志和第一篇推文。 在天气应用上，主角元素是指定地点的天气预测。 在新闻网站上，主角元素可能是重大新闻和置顶大图。
   在网页上，几乎总有一部分内容比其他部分更重要。 如果页面最重要的部分能迅速加载，用户可能不会注意到其余部分是否加载。
3. 是否可用？(用户可以与页面交互，还是页面仍在忙于加载？)
   浏览器通过将任务添加到主线程上的队列等待逐个执行来响应用户输入。 浏览器执行应用的 JavaScript 时也会这样做，因此从这个角度看，浏览器为单线程。
   在某些情况下，运行这些任务可能要花费较长时间，如果确实如此，主线程就会遭到阻止，而队列中的所有其他任务都必须等待。
   https://w3c.github.io/longtasks/【Long Tasks API】可以将任何耗时超过 50 毫秒的任务标示为可能存在问题，并向应用开发者显示这些任务。 选择 50 毫秒的时间是为了让应用满足在 100 毫秒内响应用户输入的 RAIL 指导原则。
   可交互时间 (TTI) 指标用于标记应用已进行视觉渲染并能可靠响应用户输入的时间点。 应用可能会因为多种原因而无法响应用户输入：

   1. 页面组件运行所需的 JavaScript 尚未加载。
   2. 耗时较长的任务阻塞主线程。

   TTI 指标可识别页面初始 JavaScript 已加载且主线程处于空闲状态（没有耗时较长的任务）的时间点。

4. 是否令人愉快？(交互是否顺畅而自然，没有滞后和卡顿？)
   耗时较长的任务（在技术上不存在耗时较长的任务）

在实际用户的设备上衡量这些指标
